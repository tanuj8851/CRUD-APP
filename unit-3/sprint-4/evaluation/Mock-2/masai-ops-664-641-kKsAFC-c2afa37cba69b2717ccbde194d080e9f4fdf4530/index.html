<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home Page</title>
    <style>
        /* All Your css for Home page goes here  */
        
        #menu-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            column-gap: 1cm;
            row-gap: 1cm;
        }
        
        .card {
            /* border: 1px solid; */
            padding: 16px;
            box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;
        }
        
        .card img {
            height: 7cm;
            width: 100%;
        }
        
        .card button {
            background-color: rgb(31, 137, 180);
            color: white;
            border: none;
        }
    </style>
</head>

<body>
    <div class="nav">
        <h1>Web Coffee Shop Menu</h1>
        <a href="./index.html">Home</a>
        <a href="./order.html">Ordered</a>
    </div>
    <div id="filter">
        <input type="number" id="lower" />
        <input type="number" id="upper" />
        <button id="filter-btn">Filter</button>
    </div>
    <select id="sort">
      <option value="">Sort By Price</option>
      <option value="asc">Ascending</option>
      <option value="desc">Descending</option>
    </select>
    <h1 id="alert"></h1>
    <div id="menu-container">
        <!-- Here Append All the Items  -->
    </div>
</body>
<script>
    // All your JS code for Home Page goes here
    let url = `https://63c7a5645c0760f69abb1675.mockapi.io/products`;
    let linkDesc = `https://63c7a5645c0760f69abb1675.mockapi.io/products?sortBy=price&order=desc`;
    let linkAsce = `https://63c7a5645c0760f69abb1675.mockapi.io/products?sortBy=price&order=asc`;
    let menu = document.getElementById("menu-container");
    let filterBtn = document.getElementById("filter-btn");
    let minPrice = document.getElementById("lower").value;
    let maxPrice = document.getElementById("upper").value;
    let sortData = document.getElementById("sort");
    // let buybtn = document.getElementsById("card-btn")
    // console.log(sortData.value)
    let coffeedata = [];

    window.addEventListener("load", () => {
        Datafetch(url)
    })

    function Datafetch(url) {
        fetch(url)
            .then((res) => res.json())
            .then(data => {
                let coffee = data;
                // console.log(coffee)
                coffeedata = coffee
                   
                displayData(coffee)


            })
    }

    function fetchData(url) {
        fetch(url)
            .then((res) => res.json())
            .then(data => {
                let coffee = data.data;
                // console.log(coffee)
                coffeedata = coffee
                    // coffee.forEach(el => {
                    //     // coffeedata.push(el)
                    //     let original = {
                    //         image: el.image,
                    //         desc: el.description,
                    //         title: el.title,
                    //         id: el.id,
                    //         price: el.price,
                    //         ingredients: el.ingredients
                    //     }
                    //     coffeedata.push(original)


                // })
                displayData(coffee)


            })
    }


    console.log(coffeedata)
    filterBtn.addEventListener("click", function() {


        let filteredData = coffeedata.filter(el => {
            return el.price >= minPrice && el.price <= maxPrice;
        })
        console.log(filteredData)




    })

    sort.addEventListener("change", function() {

        if (sortData.value == "asc") {
            // link = linkAsce
            console.log(linkAsce)
                // fetchData(linkAsce)
            Datafetch(linkAsce)



        } else if (sortData.value == "desc") {
            link = linkDesc
            console.log(linkDesc)
                // fetchData(linkDesc)
            Datafetch(linkDesc)



        } else {
            Datafetch(url)
        }


    });













    function displayData(data) {
        menu.innerHTML = null;
        data.forEach(e => {
            let card = document.createElement("div");
            card.classList.add("card");

            card.innerHTML =
                `
                    <img src=${e.image} alt="">
                    <h3>${e.title}</h3>
                    <p>${e.ingredients}</p>
                    <p>${e.description}</p>
                    <p>${e.price}</p>
                    <button id="card-btn">Buy</button>
                `
            menu.append(card);
        })
    }
</script>

</html>